<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lincolnshire Poacher Emulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <style>
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 20px;
        }

            .controls button {
                font-size: 1rem;
                padding: 10px 20px;
                background-color: #333;
                color: #fff;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                transition: background 0.3s;
            }

                .controls button:hover {
                    background-color: #555;
                }
    </style>
</head>
<body>

    <!-- 🌙/☀️ Theme Toggle Icon -->
    <div id="themeToggleIcon" class="theme-toggle" title="Toggle Light/Dark Mode">🌙</div>

    <div class="container">
        <h1>E03 Number Station Emulator</h1>
        <p class="subtitle">aka The Lincolnshire Poacher</p>

        <div id="console" class="console"></div>

        <!-- ✅ Always-visible Enter button -->
        <div id="enterControls" class="controls">
            <button id="startBtn">Enter</button>
        </div>

        <!-- ✅ Hidden until transmitter is active -->
        <div id="mainControls" class="controls" style="display: none;">
            <button id="stopBtn">Stop Transmission</button>
        </div>

        <div class="info-section">
            <button class="info-toggle">More Information about E03</button>
            <div class="info-content" id="e03Info">
                <p><strong>Welcome to the E03 - The Lincolnshire Poacher Emulator</strong></p>
                <p>
                    <em>
                        "When I was bound apprentice in famous Lincolnshire,<br />
                        I serv'd my master truly, for nearly seven odd year,<br />
                        Till I took up to poaching, as you shall quickly hear.<br />
                        Oh, 'tis my delight on a shining night, in the season of the year."
                    </em>
                </p>
                <p><strong>IMPORTANT NOTE:</strong> This emulator is purely for educational and entertainment purposes only. It should never be broadcasted which includes radio frequencies, telegraphy, or similar. It also has no encryption techniques and is purely generating random numbers and so has no meaning.</p>
                <p>
                    E03 was a numbers station and was so named after the 2 bar tune taken from an old folk song called
                    <em>'The Lincolnshire Poacher'</em> — which was played as an indentification (or tuning) signal before the main broadcast. It's designation as E03 is based on research and classifaction by a team of enthusiasts who catalogue known and discovered Number Stations.
                </p>
                <p>
                    Much and little is known about number stations, as no government has acknowledged their existence or operation.
                    What we think we know about E03 is that at one time it broadcasted from RAF Akrotiri in Cyprus and stopped
                    transmissions around July 2008. E03 also had a sister station in the southern hemisphere, E03a, which used the folk
                    song <em>'Cherry Ripe'</em> as its interval signal and it was last reported in December 2009.
                </p>
                <p>
                    This emulator was created as a bit of fun to cast light on the mysterious world of Number Stations.<br />
                    Priyom is an international organization intending to research and bring to light the mysterious reality of intelligence, military and diplomatic communication via shortwave radio: numbers stations. Visit them here at <a href="https://priyom.org" target="_blank">priyom.org</a>.<br />
                    Audio extracted from recordings from The Conet Project:
                    <a href="https://soundcloud.com/the-conet-project/sets/the-conet-project" target="_blank">The Conet Project on SoundCloud</a>.
                </p>
                <p><em>I hope you enjoy this emulator and relive the mysterious world of the Lincolnshire Poacher!</em></p>
            </div>
        </div>
    </div>

    <div class="visitor-counter">
        <a href="https://www.free-counters.org/">free Counters on Free-Counters.org</a><br />
        <script type="text/javascript" src="https://www.freevisitorcounters.com/auth.php?id=de66d91c503fd80e888fc4e1a67be163ea12c0cc"></script>
        <script type="text/javascript" src="https://www.freevisitorcounters.com/en/home/counter/1338679/t/1"></script>
        <p class="credit">
            🛠️ Built by <a href="https://github.com/cjfranko/LincolnshirePoacherWeb" target="_blank">Chris Frankland-Wright</a>
        </p>
    </div>

    <audio id="static" src="audio/radio_static.wav" loop></audio>
    <script src="script.js"></script>
    <script>
    // Touch-friendly Enter button logic
    document.addEventListener("DOMContentLoaded", () => {
      const startBtn = document.getElementById("startBtn");

      startBtn.addEventListener("click", () => {
        const cursor = document.querySelector(".line.typing");
        if (cursor) cursor.remove();

        if (typeof transmitterPoweredOn === "undefined" || typeof transmissionStarted === "undefined") {
          console.warn("Transmission state not ready. Try again in a moment.");
          return;
        }

        if (!transmitterPoweredOn) {
          transmitterPoweredOn = true;
          handleTransmitterInit();
        } else if (!transmissionStarted) {
          startTransmission();
        }
      });
    });
    </script>
</body>
</html>
